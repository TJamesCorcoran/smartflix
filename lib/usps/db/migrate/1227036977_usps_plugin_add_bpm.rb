class UspsPluginAddBpm < ActiveRecord::Migration
  def self.up
    add_column :usps_postage_charts, :zone, :integer, :null => true

    pounds_to_zones_to_dollars = { 
      1.0 => {
        1 => 2.15,
        2 => 2.15,
        3 => 2.19,
        4 => 2.25,
        5 => 2.34,
        6 => 2.45,
        7 => 2.51,
        8 => 2.70},
      
      1.5=> {
        1 => 2.15,
        2 => 2.15,
        3 => 2.19,
        4 => 2.25,
        5 => 2.34,
        6 => 2.45,
        7 => 2.51,
        8 => 2.70},
      
      2.0=> {
        1 => 2.24,
        2 => 2.24,
        3 => 2.30,
        4 => 2.38,
        5 => 2.50,
        6 => 2.64,
        7 => 2.72,
        8 => 2.98},
      
      2.5=> {
        1 => 2.34,
        2 => 2.34,
        3 => 2.41,
        4 => 2.51,
        5 => 2.66,
        6 => 2.84,
        7 => 2.94,
        8 => 3.26},
      
      3.0=> {
        1 => 2.43,
        2 => 2.43,
        3 => 2.52,
        4 => 2.64,
        5 => 2.82,
        6 => 3.03,
        7 => 3.15,
        8 => 3.54},
      
      3.5=> {
        1 => 2.53,
        2 => 2.53,
        3 => 2.63,
        4 => 2.77,
        5 => 2.98,
        6 => 3.23,
        7 => 3.37,
        8 => 3.82},
      
      4.0=> {
        1 => 2.62,
        2 => 2.62,
        3 => 2.74,
        4 => 2.90,
        5 => 3.14,
        6 => 3.42,
        7 => 3.58,
        8 => 4.10},
      
      4.5=> {
        1 => 2.72,
        2 => 2.72,
        3 => 2.85,
        4 => 3.03,
        5 => 3.30,
        6 => 3.62,
        7 => 3.80,
        8 => 4.38},
      
      5.0=> {
        1 => 2.81,
        2 => 2.81,
        3 => 2.96,
        4 => 3.16,
        5 => 3.46,
        6 => 3.81,
        7 => 4.01,
        8 => 4.66},
      
      6.0=> {
        1 => 3.00,
        2 => 3.00,
        3 => 3.18,
        4 => 3.42,
        5 => 3.78,
        6 => 4.20,
        7 => 4.44,
        8 => 5.22},
      
      7.0=> {
        1 => 3.19,
        2 => 3.19,
        3 => 3.40,
        4 => 3.68,
        5 => 4.10,
        6 => 4.59,
        7 => 4.87,
        8 => 5.78},
      
      8.0=> {
        1 => 3.38,
        2 => 3.38,
        3 => 3.62,
        4 => 3.94,
        5 => 4.42,
        6 => 4.98,
        7 => 5.30,
        8 => 6.34},
      
      9.0=> {
        1 => 3.57,
        2 => 3.57,
        3 => 3.84,
        4 => 4.20,
        5 => 4.74,
        6 => 5.37,
        7 => 5.73,
        8 => 6.90},
      
      10.0=> {
        1 => 3.76,
        2 => 3.76,
        3 => 4.06,
        4 => 4.46,
        5 => 5.06,
        6 => 5.76,
        7 => 6.16,
        8 => 7.46},
      
      11.0=> {
        1 => 3.95,
        2 => 3.95,
        3 => 4.28,
        4 => 4.72,
        5 => 5.38,
        6 => 6.15,
        7 => 6.59,
        8 => 8.02},
      
      12.0=> {
        1 => 4.14,
        2 => 4.14,
        3 => 4.50,
        4 => 4.98,
        5 => 5.70,
        6 => 6.54,
        7 => 7.02,
        8 => 8.58},
      
      13.0=> {
        1 => 4.33,
        2 => 4.33,
        3 => 4.72,
        4 => 5.24,
        5 => 6.02,
        6 => 6.93,
        7 => 7.45,
        8 => 9.14},
      
      14.0=> {
        1 => 4.52,
        2 => 4.52,
        3 => 4.94,
        4 => 5.50,
        5 => 6.34,
        6 => 7.32,
        7 => 7.88,
        8 => 9.70},
      
      15.0=> {
        1 => 4.71,
        2 => 4.71,
        3 => 5.16,
        4 => 5.76,
        5 => 6.66,
        6 => 7.71,
        7 => 8.31,
        8 => 10.26 }
      
      
    }

    pounds_to_zones_to_dollars.each_pair do |pounds, zones_to_dollars|
      
      zones_to_dollars.each_pair do |zone, dollars|
        UspsPostageChart.create!(:usps_physical =>"parcel",
                                 :usps_class =>"bound printed matter", 
                                 :weight_oz => (pounds * 16),
                                 :zone => zone,
                                 :price_cents => dollars * 100)
      end
    end
  end

  def self.down
    UspsPostageChart.destroy_all("usps_class = 'bound printed matter'")

    remove_column :usps_postage_charts, :zone
  end
end
