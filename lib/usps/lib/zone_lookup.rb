module UspsUtil

  def UspsUtil.zone_lookup(src_zip, dst_zip)
    raise ArgumentError, "No zone data for source zip code #{src_zip}" if src_zip[0,3] != '024'
    # Got zone data from http://postcalc.usps.gov/Zonecharts/default.asp
    case dst_zip[0,3]
    when '005' then 2
    when '255'..'257' then 5
    when '540' then 6
    when '749' then 6
    when '006'..'009' then 7
    when '258'..'268' then 4
    when '541'..'547' then 5
    when '750'..'754' then 7
    when '010'..'013' then 2
    when '270'..'279' then 4
    when '548' then 6
    when '755' then 6
    when '014'..'034' then 1
    when '280'..'284' then 5
    when '549' then 5
    when '756'..'768' then 7
    when '035'..'043' then 2
    when '285' then 4
    when '550'..'551' then 6
    when '769' then 8
    when '044' then 3
    when '286'..'315' then 5
    when '553'..'567' then 6
    when '770'..'784' then 7
    when '045' then 2
    when '316' then 6
    when '570'..'574' then 6
    when '785' then 8
    when '046'..'047' then 3
    when '317'..'322' then 5
    when '575'..'577' then 7
    when '786'..'796' then 7
    when '048' then 2
    when '323'..'342' then 6
    when '580'..'584' then 6
    when '797'..'799' then 8
    when '049' then 3
    when '344' then 6
    when '585'..'588' then 7
    when '800'..'810' then 7
    when '050'..'054' then 2
    when '346'..'347' then 6
    when '590'..'591' then 8
    when '811'..'816' then 8
    when '055' then 1
    when '349'..'352' then 6
    when '592'..'593' then 7
    when '820' then 7
    when '056'..'067' then 2
    when '354'..'355' then 6
    when '594'..'599' then 8
    when '821' then 8
    when '068'..'069' then 2
    when '356'..'358' then 5
    when '600'..'619' then 5
    when '822' then 7
    when '070'..'104' then 3
    when '359'..'361' then 6
    when '620' then 6
    when '823'..'825' then 8
    when '105'..'109' then 2
    when '362' then 5
    when '622'..'623' then 6
    when '826'..'828' then 7
    when '110'..'114' then 3
    when '363'..'369' then 6
    when '624'..'629' then 5
    when '829'..'838' then 8
    when '115' then 2
    when '370'..'374' then 5
    when '630'..'631' then 6
    when '840'..'847' then 8
    when '116' then 3
    when '375' then 6
    when '633'..'641' then 6
    when '850' then 8
    when '117'..'119' then 2
    when '376'..'379' then 5
    when '644'..'658' then 6
    when '851'..'853' then 8
    when '120'..'123' then 2
    when '380'..'383' then 6
    when '660'..'662' then 6
    when '855'..'857' then 8
    when '124'..'127' then 2
    when '384'..'385' then 5
    when '664'..'674' then 6
    when '859'..'860' then 8
    when '128' then 2
    when '386'..'397' then 6
    when '675'..'679' then 7
    when '863'..'865' then 8
    when '129' then 3
    when '398'..'418' then 5
    when '680'..'681' then 6
    when '870'..'875' then 8
    when '130'..'139' then 3
    when '420'..'427' then 5
    when '683'..'689' then 6
    when '877'..'880' then 8
    when '140'..'147' then 4
    when '430'..'436' then 5
    when '690'..'693' then 7
    when '881' then 7
    when '148'..'149' then 3
    when '437'..'449' then 4
    when '700'..'701' then 6
    when '882'..'883' then 8
    when '150'..'169' then 4
    when '450'..'456' then 5
    when '703'..'704' then 6
    when '884' then 7
    when '170'..'172' then 3
    when '457' then 4
    when '705'..'706' then 7
    when '885' then 8
    when '173'..'177' then 4
    when '458'..'499' then 5
    when '707'..'708' then 6
    when '889'..'891' then 8
    when '178'..'199' then 3
    when '500'..'516' then 6
    when '710'..'714' then 6
    when '893'..'895' then 8
    when '200'..'212' then 4
    when '520' then 5
    when '716'..'729' then 6
    when '897'..'898' then 8
    when '214'..'241' then 4
    when '521'..'526' then 6
    when '730'..'731' then 7
    when '900'..'908' then 8
    when '242' then 5
    when '527'..'528' then 5
    when '733'..'739' then 7
    when '910'..'928' then 8
    when '243'..'245' then 4
    when '530'..'532' then 5
    when '740'..'741' then 6
    when '930'..'986' then 8
    when '246'..'248' then 5
    when '534'..'535' then 5
    when '743'..'745' then 6
    when '988'..'999' then 8
    when '249'..'254' then 4
    when '537'..'539' then 5
    when '746'..'748' then 7
    else '???'
    end
  end

end
